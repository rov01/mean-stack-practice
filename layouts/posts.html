<html>
	<header>
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		
	</header>
	<body ng-app="app">
		<div ng-controller="PostsCtrl" class="container">
			<h1>Recent Posts</h1>
			<form role='form'>
				<div class="form-group">
					<div class="input-group">
						<input ng-model='postBody' class="form-control"/>
						<span class='input-group-btn'>
							<button ng-click="addPost()" class="btn btn-default">Add Post</button>
						</span>
					</div>
				</div>
			</form>		
			<ul class="list-group">
				<li ng-repeat="post in posts | orderBy:'-date'" class="list-group-item">
					<strong>@{{post.username}}</strong>
					<span>{{post.body}}</span>
				</li>
			</ul>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
		<script>
			/**
			* app Module
			*
			* Description
			*/
			angular.module('app', []).
			controller('PostsCtrl', ['$scope', '$http', function ($scope,$http) {

				$scope.addPost = function(){

					if ($scope.postBody) {

						// console.log($scope.postBody)

						$http.post('/api/posts',{
							username : 'dickeyxxx',
							body:$scope.postBody

						}).success(function(post){
							$scope.posts.unshift(post)
						
							$scope.postBody = null
						})
					}
				}

				$http.get('http://localhost:3000/api/posts')
				.success(function(posts){
					$scope.posts = posts
				})
				.error(function(posts) {
					console.log('error')
					console.log(posts)
				});

			}])

		</script>

	</body>
</html>